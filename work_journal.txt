#####################################
Work Journal: Genome Analysis project
#####################################

Working on right now: Step 5, step 6
What's been done: RNA alignment and feature count
Next step: Phylogeny, start to analyze the results

#####################################
Questions
For PhyloPhlan:
- There are two different pipelines, supermatrix and supertree: What's the difference and which should be used?

For the result of the HTSeq:
What I want to do for each bin and environment (RNA sample):
1. Look into the HTSeq and select only the mappings which correspond to a feature (from the Prokka annotation)
2. Count how many times each feature appears in each bin, and each environment
3. Find more information about the features, at least all that the Prokka file says regarding ie function
4. Summarize the results in a text file together with the proposed species name, looking something like:
    Bin XX (proposed species: XX)
      RNA XX (high/low oxygen)
         Feature name: Feature count: UniProt ID: Function

To do this, I've started filtering the HTSeq sam file to get only the found features.
- There is a lot of information in the files. I for sure want to filter around if the feature is found or not,
but do I also need to take ie mapping quality into consideration? In that case, what would be a reasonable threshold?
http://www.acgt.me/blog/2014/12/16/understanding-mapq-scores-in-sam-files-does-37-42
https://samtools.github.io/hts-specs/SAMtags.pdf
https://www.samformat.info/sam-format-flag

#####################################
2024-04-24
Worked on the PhyloPhlan script
The assignment to species seems to work, for the tree I need to specify the config file (supermatrix vs supertree)

2024-04-23
Ran the RNA alignment, 5.1 (BWA and samtools)
Ran the feature count, 5.2 (HTSeq)

Idea for one extra analysis: For the abundance, map the DNA reads to the bins and use samtools stats to see the abundance

2024-04-22
Updated the wiki, continued working on the RNA alignment script
Researched a bit about the feature count software HTSeq to know what is needed from the output files of the alignment
Took away the fasta file endings on the gff files so that they are compatible with HTSeq

2024-04-18
I decided on keeping four bins from the assembly+binning based on completeness and contamination (15, 20, 4, 19)
For those, I ran the Prokka annotation (which worked fine)

Started on step 5, the RNA alignment to the bins
Created a first draft of a script, researched bwa and samtools

2024-04-17
Updated the Wiki with results from the assembly and binning

2024-04-16
The assembly evaluation is ok: The numbers differ because we use a subset of the data. And it's not surprising to get hits on wrong organisms, because we expect quite "unknown" organisms to turn up. We're not interested in the references, mainly in the statistics. 

Ran a first attempt at binning. Choose to not try and include the -a command (it needs an alignment file where the coverage of each contig is found, so that it can use that additional information for the binning).
The binning gave 26 bins.

Ran a first attempt at CheckM binning evaluation, and got a result. 

2024-04-15
Updated the Wiki with the results of step 1 (preprocessing).
Tried to run the metagenome evaluation with MetaQuast.
Started researching for the binning step. 

2024-04-12
For the Trimmomatic, I picked the paired output for further analysis
I ran FastQC on these four runs and downloaded the HTML results
For Megahit, I'll pool all samples and analyze them as one metagenome. Why? Because it gives one pool with more DNA --> more statistical information to get a good assembly.

Ran the metagenome analysis with Megahit, and it worked (I think).

2024-04-09
Ran the Trimmomatic analysis
Started working on the megahit assembly

2024-04-08
Ran the FastQC for the trimmed DNA and untrimmed RNA
Downloaded the HTML results to my computer
Started working on the RNA trimming. Have a test script to try (but it doesnâ€™t work). Gives an error stating that the ILLUMINACLIP command is not found (why??)

2024-03-28
Finished the project plan
Started the FastQC analysis
Managed to run one sample
Moved files back and forth
